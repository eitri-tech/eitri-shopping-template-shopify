#import "../fragments/product.fragment.gql"

query SEARCH_QUERY(
    $query: String!
    $after: String
    $before: String
    $first: Int
    $last: Int
    $prefix: SearchPrefixQueryType
    $productFilters: [ProductFilter!]
    $reverse: Boolean
    $sortKey: SearchSortKeys
    $types: [SearchType!]
    $unavailableProducts: SearchUnavailableProductsType
) {
    search(
        query: $query
        after: $after
        before: $before
        first: $first
        last: $last
        prefix: $prefix
        productFilters: $productFilters
        reverse: $reverse
        sortKey: $sortKey
        types: $types
        unavailableProducts: $unavailableProducts
    ) {
        totalCount
        nodes {
            ... on Product {
                ...ProductFields
            }
        }
    }
}

query COLLECTION_QUERY(
    $collectionId: ID
    $handle: String
    $after: String
    $before: String
    $first: Int
    $last: Int
    $reverse: Boolean
    $sortKey: ProductCollectionSortKeys
) {
    collection(
        id: $collectionId
        handle: $handle
    ) {
        id
        title
        description
        handle
        image {
            url
            height
            width
            id
        }
        trackingParameters,
        products (first: $first, last:$last, after: $after, before: $before, reverse: $reverse, sortKey: $sortKey) {
            nodes {
                ... on Product {
                    ...ProductFields
                }
            }
        }
    }
}